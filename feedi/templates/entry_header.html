<div class="level feed-header is-mobile">
    <div class="level-left">
        <div class="level-item is-hidden-tablet">
            {% include "entry_avatar.html" %}
        </div>
        <p>
            <b>
                <span>
                    {% if entry.avatar_url %}
                    <!-- FIXME title is just a hack here. we should add a display name field separate from username -->
                    <a href="{{ url_for('entry_list', username=entry.username ) }}">
                        {{ entry.title or entry.username }}
                    </a>
                    {% else %}
                    <a href="{{ url_for('entry_list', feed_name=entry.feed.name ) }}">
                        {{ entry.feed.name}}
                    </a>
                    {% endif %}
                </span>
            </b>
            <small><span class="has-text-grey-light"> &nbsp; {% if entry.username %}{{ entry.username}} · {%endif%}{%if entry.content_url and entry.content_url != entry.entry_url %}{{ entry.content_url | url_domain}} · {% endif %}<span title="{{ entry.remote_updated.isoformat() }}">{{ entry.remote_created | humanize }}</span></small>
        </p>
    </div>
    <div class="level-right is-hidden-touch">
        <a tabindex="-1" class="level-item icon hover-icon is-white is-rounded {% if entry.favorited %}toggled{% endif %}" title="Favorite entry"
           hx-put="{{ url_for('entry_favorite', id=entry.id )}}"
           _="on click toggle .toggled
                     then on keyup[key is 'f'] from the closest .feed-entry trigger click on me"
        ><i class="fas fa-star"></i></a>
        <a tabindex="-1" class="level-item icon hover-icon is-white is-rounded {% if entry.pinned %}toggled{% endif %} pin-button" title="Pin entry"
           hx-put="{{ url_for('entry_pin', id=entry.id, **filters) }}"
           hx-target="#pinned-entry-list"
           _="on click toggle .toggled on < [data-id='{{entry.id}}'] .pin-button />
                     then toggle .is-hidden on < [data-id='{{entry.id}}'] />
                     then on keyup[key is 'p'] from the closest .feed-entry trigger click on me">
            <i class="fas fa-thumbtack"></i></a>
        <div class="dropdown icon is-right">
            <div class="dropdown-trigger">
                <a class="icon hover-icon is-white is-rounded level-item"
                   tabindex="-1"
                   _="on click go to middle of the closest .feed-entry smoothly then
                          on click toggle .is-active on the closest .dropdown then
                          on click elsewhere remove .is-active from the closest .dropdown">
                    <i class="fas fa-ellipsis-v"></i>
                </a>
            </div>
            <div class="dropdown-menu" role="menu">
                <div class="dropdown-content">{% include "entry_commands.html" %}</div>
            </div>
        </div>
    </div>
</div>
